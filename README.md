# Modern Extended

Modern Extended is a small collection of user scripts and tools that aims to give an easy and simple installation/customization process for mpv beginners.

This osc is a fork of [ModernF](https://github.com/FinnRaze/mpv-osc-modern-f) that extendeds the script and enhances the experince.

![image](https://github.com/user-attachments/assets/e2b7f4a8-3eee-45e7-8e73-75d798015616)

[MpvGalleryView](https://github.com/occivink/mpv-gallery-view) to display playlists (shortcut `g`)

![image](https://github.com/user-attachments/assets/3ddf08ea-35c2-47e0-947f-90371c83e560)

<!--![image](https://github.com/user-attachments/assets/bb1889a9-e2b1-42cb-b7c0-244e83f62e10)-->

With [Anime4K](https://github.com/bloc97/Anime4K) watch peak cinema with upscaling in real time (Ctrl+`0-6`, artifacting in gif is from video capture software, it looks much cleaner in player I swear :sob:) 

![extended-07](https://github.com/user-attachments/assets/bbba504f-d59e-45d1-903c-8c68f3c5e0e1)
<!--![extended-15](https://github.com/user-attachments/assets/85ff76b5-b38f-44a1-b5da-3c3f4c8c40ad)-->

Found a great clip you would like to use? [MpvSlicingCopy](https://github.com/snylonue/mpv_slicing_copy) will allow you to crop it out in a matter of seconds (shortcut `c`)

https://github.com/user-attachments/assets/5f2329cd-69c2-4a0d-8cb0-d540266741e6


## Installation Guide ðŸ“–

#### Dependencies
`Modern Extended` will run without these but some functionalities will be disabled

- [ffmpeg](https://ffmpeg.org/download.html) for slicing video
- [yt-dlp.exe](https://github.com/yt-dlp/yt-dlp/releases/tag/2024.08.06) for streaming from youtube url's
- [MPV Standalone](https://mpv.io/installation/) (optional) ThumbFast will not work properly if you are on mpv.net without this ([Refrence](https://mpv.io/installation/))

Make sure to add all dependencies to [Environment Variables Path](https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/)

### Install

Youtube - TODO

**Make sure to remove any conflicting osc scripts**

<br><br>

Copy all files from this repository into your mpv config directory

Linux `~/.config/mpv/`

Windows `%APPDATA%/mpv/`

<br><br>

If you are using Mpv.net or another version of mpv you need to find the correct directory name

Mpv.net 

Linux `~/.config/mpv.net/`

Windows `%APPDATA%/mpv.net/`

<br><br>

Download the appropriate [Anime4k](https://github.com/bloc97/Anime4K) shaders for your system and extract **ONLY** the ```shaders``` folder to your mpv config directory

For ```input.conf``` and ```mpv.conf``` copy the text content of these files from the download and add them to the bottom of their respective files in the mpv config directory

For example your ```mpv.conf``` in you mpv config directory should look similar to this:

```batch
# disable the default osc when using a custom one
osc=no
border=no
loop-playlist=inf

# path to yt-dlp.exe, download from https://github.com/yt-dlp/yt-dlp/releases
# script-opts=ytdl_hook-ytdl_path="C:\path\to\yt-dlp.exe"

# allow mpv to load youtube playlist links
ytdl-raw-options=yes-playlist=

# Optimized shaders for lower-end GPU: Mode A (Fast)
glsl-shaders="~~/shaders/Anime4K_Clamp_Highlights.glsl:~~/shaders/Anime4K_Restore_CNN_M.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl:~~/shaders/Anime4K_AutoDownscalePre_x2.glsl:~~/shaders/Anime4K_AutoDownscalePre_x4.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_S.glsl"

```

and you're all done!


## Custom Features

The osc comes with a new Layout `extended` which provides new options:
- **Toggle Video Button**, save on resources when listening to a podcast or youtube music by turning off the video stream
- **Toggle Loop Button**, easily toggle between looping playlist, single file or no loop
- **Toggle Shuffle Button**, shuffle your playlist
- **Toggle Playlist Button**, displays your playlist

Also generally improved the user experince by customizing the style and patching some unexpected behaviours to be more user friendly

- **Info Button** (right click) will now display Active Key Bindings **indefinetly** until toggled off, allowing user to read without being on a timer
- fixed random empty folders being generated by SlicingCopy
- fixed PlaylistView not generating the thumbnails directory on windows, and added support for generating the directory on other versions of mpv (e.g. mpv.net)
- removed some inputs that can be confusing like scrolling the seek bar accidentally when trying to change the volume
- created a super responsive design that's compatable with any screen size.

also many more tweaks and little configurations here and there than I can mention.

feel free to explore the configurations files in `scripts-opts`, `input.conf` and `mpv.conf`, all options from the default scripts remain.

## Key Mapping

Shortcuts can be managed in `input.conf`, this can be done by uncommenting some of the commands, or you can add your own custom commands with the following format

```bash
Key command # description

# example
Ctrl+s screenshot window  # take a screenshot of the window with OSD and subtitles
```

Mpv.net has many shortcuts setup by default and I added some customizations to them, Some of the most notable shortcuts are:

- `Right Arrow` skip forword 3 seconds 
- `Left Arrow` skip backword 3 seconds 
- `Up Arrow` volume up 2
- `Down Arrow` volume down 2
- `.` go to next frame
- `,` go to previous frame
<br><br>
- `Space` toggle play/pause
- `Left Click` toggle play/pause
- `Right Click` open context menu (mpv.net)
- `Double Left Click` toggle fullscreen
<br><br>
- `b` toggle window border
- `c` cut video clip
- `m` toggle mute
- `l` toggle loop file
- `Ctrl+l` toggle loop playlist
<br><br>
- `]` step video speed up 0.1
- `[` step video speed down 0.1
<br><br>
- `Ctrl+0-6` switch anime4k profile `Ctrl+0 == off`

For a full list of active key bindings you can **Right Click** on `Info Button` on the bottom right of the player to display list of all key bindings (navigate with arrow keys up/down):

![extended-10](https://github.com/user-attachments/assets/e2427a7f-3a1e-4f4f-8bf6-a72edfdac752)


## Credits

- [Anime4K](https://github.com/bloc97/Anime4K)
- [ModernF](https://github.com/FinnRaze/mpv-osc-modern-f) fork of [Modern](https://github.com/maoiscat/mpv-osc-modern)
- [ThumbFast](https://github.com/po5/thumbfast)
- [GalleryView](https://github.com/occivink/mpv-gallery-view)
- [SlicingCopy](https://github.com/snylonue/mpv_slicing_copy)
- [Playlistmanager](https://github.com/jonniek/mpv-playlistmanager) 




